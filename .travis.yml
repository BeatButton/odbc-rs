sudo: false
language: rust
rust:
 - stable
 - beta
 - nightly
matrix:
  allow_failures:
   - rust: nightly
addons:
  apt:
    packages:
     - libcurl4-openssl-dev
     - libelf-dev
     - libdw-dev
     - binutils-dev
     - unixodbc
     - unixodbc-dev
     - odbc-postgresql
     - libsqliteodbc
services:
 - postgresql
before_script:
 - psql -c 'create database travis_ci_test;' -U postgres
 - export ODBCINI=${PWD}/travis/odbc.ini
 - pip install 'travis-cargo<0.2' --user
 - export PATH=$HOME/.cargo/bin:$HOME/.local/bin:$PATH
script:
 - travis-cargo build
 - travis-cargo test -- --verbose --features travis
after_success:
 - travis-cargo coveralls --no-sudo --verify
env:
 - global:
   - RUST_BACKTRACE=1
   - RUST_TEST_THREADS=1
